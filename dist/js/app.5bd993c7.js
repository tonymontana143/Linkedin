(function(){var e={339:function(e,t,n){"use strict";var s=n(130),a=n(768);function i(e,t,n,s,i,r){const o=(0,a.g2)("navbar"),d=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)(a.FK,null,[r.isRegisterPage?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(o,{key:0})),(0,a.bF)(d)],64)}var r={computed:{isRegisterPage(){return"register"===this.$route.name}}},o=n(241);const d=(0,o.A)(r,[["render",i]]);var c=d,u=n(387),l=n(232);const p=e=>((0,a.Qi)("data-v-16a4f9d8"),e=e(),(0,a.jt)(),e),m={class:"forms-container"},h={class:"signin-signup"},g=p((()=>(0,a.Lk)("h2",{class:"title"},"Sign up",-1))),y={class:"input-field"},f=p((()=>(0,a.Lk)("i",{class:"fas fa-user"},null,-1))),b=p((()=>(0,a.Lk)("h3",null,"Your address",-1))),v=p((()=>(0,a.Lk)("input",{type:"submit",class:"btn",value:"Sign up"},null,-1)));function F(e,t,n,i,r,o){return(0,a.uX)(),(0,a.CE)("div",m,[(0,a.Lk)("div",h,[(0,a.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>o.submitForm&&o.submitForm(...e)),["prevent"]))},[g,(0,a.Lk)("div",y,[f,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.name=e),type:"text",placeholder:"Name",name:"first_name",required:""},null,512),[[s.Jo,r.name]])]),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...t)=>e.connectWallet&&e.connectWallet(...t)),class:"btn"},"Connect Metamask"),b,(0,a.Lk)("p",null,(0,l.v_)(e.$store.state.address),1),v],32)])])}var w=n(782),k={name:"RegFormView",data(){return{name:""}},methods:{...(0,w.i0)({connectWallet:"connectWallet",registerProfile:"registerProfile"}),async submitForm(){try{await this.registerProfile([this.name]),this.$router.push("/")}catch(e){console.error("Error submitting form:",e)}}}};const T=(0,o.A)(k,[["render",F],["__scopeId","data-v-16a4f9d8"]]);var A=T,P="data:image/jpeg;base64,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";const C=e=>((0,a.Qi)("data-v-3be0286f"),e=e(),(0,a.jt)(),e),q={class:"container"},I={class:"main-body"},L={class:"card"},E={class:"card-body"},R={class:"d-flex flex-column align-items-center text-center"},x=["src"],B={class:"mt-3"},U={key:0},N=C((()=>(0,a.Lk)("a",{href:"https://mumbai.polygonscan.com/address/0xDbB0e637bcEaE22EC53890BBAF213a3a46Cb8c80"},[(0,a.Lk)("img",{class:"rounded-circle",src:P,alt:""})],-1))),S=C((()=>(0,a.Lk)("p",null,"Congratulations! You have an NFT.",-1))),W=[N,S],O={key:1},V=C((()=>(0,a.Lk)("p",null,"You don't have an NFT yet. Mint one by getting 5 friends!",-1))),M={key:0},Y={key:2,class:"form-container"},j={class:"mt-3"},_={key:0,class:"form-container"},D={key:1,class:"form-container"},X={class:"input-field"},J=C((()=>(0,a.Lk)("i",{class:"fas fa-file"},null,-1))),Q={class:"mt-3"},G=C((()=>(0,a.Lk)("h1",null,"Friends",-1)));function $(e,t,n,i,r,o){const d=(0,a.g2)("friend-item");return(0,a.uX)(),(0,a.CE)("div",q,[(0,a.Lk)("div",I,[(0,a.Lk)("div",L,[(0,a.Lk)("div",E,[(0,a.Lk)("div",R,[(0,a.Lk)("img",{src:o.userImageSrc,alt:"Pinata Image",class:"rounded-circle",width:"150"},null,8,x),(0,a.Lk)("div",B,[(0,a.Lk)("h4",null,"Address: "+(0,l.v_)(e.$store.state.address),1),(0,a.Lk)("h4",null,"Username: "+(0,l.v_)(this.user.name),1),r.hasNFT?((0,a.uX)(),(0,a.CE)("div",U,W)):((0,a.uX)(),(0,a.CE)("div",O,[V,r.friends.length>=5?((0,a.uX)(),(0,a.CE)("div",M,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>o.getNFT&&o.getNFT(...e)),class:"btn"},"Get NFT")])):(0,a.Q3)("",!0)])),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>o.refresh&&o.refresh(...e)),class:"btn"},"Refresh"),(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>o.toggleNameForm&&o.toggleNameForm(...e)),class:"btn"},"Change Name"),r.showNameForm?((0,a.uX)(),(0,a.CE)("div",Y,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>r.name=e),type:"text",placeholder:"Name",name:"first_name",required:""},null,512),[[s.Jo,r.name]]),(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>o.updateName&&o.updateName(...e)),class:"btn"},"Update Name")])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",j,[(0,a.Lk)("h4",null,"User BIO: "+(0,l.v_)(this.user.bio||"No BIO yet"),1),(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>o.toggleBioForm&&o.toggleBioForm(...e)),class:"btn"},"Change Bio"),(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>o.toggleImageForm&&o.toggleImageForm(...e)),class:"btn"},"Change Image"),r.showBioForm?((0,a.uX)(),(0,a.CE)("div",_,[(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>r.bio=e),placeholder:"Bio",name:"bio",rows:"4"},null,512),[[s.Jo,r.bio]]),(0,a.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>o.updateBio&&o.updateBio(...e)),class:"btn"},"Update BIO")])):(0,a.Q3)("",!0),r.showImageForm?((0,a.uX)(),(0,a.CE)("div",D,[(0,a.Lk)("div",X,[J,(0,a.Lk)("input",{type:"file",onChange:t[9]||(t[9]=(...e)=>o.handleFileChange&&o.handleFileChange(...e)),accept:".jpg, .jpeg, .png",required:""},null,32)]),(0,a.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>o.updatePicture&&o.updatePicture(...e)),class:"btn-blue"},"Add Picture")])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Q,[G,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.friends,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e},[(0,a.bF)(d,{userAddress:e},null,8,["userAddress"])])))),128))])])])])])])}var H={name:"MainView",data(){return{name:"",bio:"",selectedFile:null,user:{},friends:[],showNameForm:!1,showBioForm:!1,showImageForm:!1,hasNFT:!1}},computed:{userImageSrc(){return this.user.image?this.user.image:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Default_pfp.svg/1200px-Default_pfp.svg.png"}},methods:{...(0,w.i0)({connectWallet:"connectWallet",getUserProfile:"getUserProfile",updateProfileName:"updateProfileName",updateProfileBio:"updateProfileBio",updateProfilePicture:"updateProfilePicture",uploadFileToPinata:"uploadFileToPinata",getImageFromPinata:"getImageFromPinata",getTOPWEB3:"getTOPWEB3",getBalanceNFT:"getBalanceNFT"}),handleFileChange(e){this.selectedFile=e.target.files[0]},async updateName(){await this.updateProfileName([this.name])},async updateBio(){await this.updateProfileBio([this.bio])},async updatePicture(){console.log(this.selectedFile);const e=await this.uploadFileToPinata([this.selectedFile]);await this.updateProfilePicture([e])},async getUser(){console.log(this.$store.state.address),this.user=await this.getUserProfile([this.$store.state.address]),this.friends=this.user.friends,console.log(this.friends)},toggleNameForm(){this.showNameForm=!this.showNameForm},toggleBioForm(){this.showBioForm=!this.showBioForm},toggleImageForm(){this.showImageForm=!this.showImageForm},async getNFT(){await this.getTOPWEB3([this.$store.state.address,this.friends.length]),this.hasNFT=!0},async getBalance(){this.hasNFT=await this.getBalanceNFT([this.$store.state.address]),console.log(this.hasNFT)},async refresh(){await this.getBalance(),await this.getUser()}}};const K=(0,o.A)(H,[["render",$],["__scopeId","data-v-3be0286f"]]);var Z=K;const z=(0,a.Lk)("div",null,[(0,a.Lk)("h1",null,"User Information")],-1);function ee(e,t,n,s,i,r){const o=(0,a.g2)("user-item");return(0,a.uX)(),(0,a.CE)(a.FK,null,[z,(0,a.bF)(o,{userAddress:e.$route.params.searchAddress},null,8,["userAddress"])],64)}var te={};const ne=(0,o.A)(te,[["render",ee]]);var se=ne;const ae=(0,a.Lk)("h2",null,"Pending Friend Requests",-1);function ie(e,t,n,s,i,r){const o=(0,a.g2)("request-item");return(0,a.uX)(),(0,a.CE)("div",null,[ae,(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.getRequests&&r.getRequests(...e)),class:"btn"},"Refresh"),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.requests,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e},[(0,a.bF)(o,{userAddress:e},null,8,["userAddress"])])))),128))])}var re={name:"MainView",data(){return{name:"",bio:"",selectedFile:null,user:{},requests:[]}},methods:{...(0,w.i0)({getincomingFriendRequests:"getincomingFriendRequests"}),async getRequests(){console.log(this.$store.state.address),this.requests=await this.getincomingFriendRequests([this.$store.state.address]),console.log(this.requests)}},async mounted(){this.getRequests()},watch:{"this.requests":"getRequests"}};const oe=(0,o.A)(re,[["render",ie]]);var de=oe;const ce=[{path:"/register",name:"register",component:A},{path:"/",name:"main",component:Z},{path:"/user/:searchAddress",name:"user",component:se},{path:"/requests",name:"requests",component:de}],ue=(0,u.aE)({history:(0,u.LA)(),routes:ce});var le=ue;const pe=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"FriendRequestAccepted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"FriendRequestDeclined",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"FriendRequestSent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"}],name:"ProfileUpdated",type:"event"},{inputs:[{internalType:"address",name:"_from",type:"address"}],name:"acceptFriendRequest",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"}],name:"declineFriendRequest",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"getFriendRequests",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"getUserProfile",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"bio",type:"string"},{internalType:"string",name:"profilePicture",type:"string"},{internalType:"address[]",name:"friends",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_user",type:"address"}],name:"getincomingFriendRequests",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_name",type:"string"}],name:"registerProfile",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_friend",type:"address"}],name:"removeFriend",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"}],name:"sendFriendRequest",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_bio",type:"string"}],name:"updateProfileBio",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_name",type:"string"}],name:"updateProfileName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_profilePictureCID",type:"string"}],name:"updateProfilePicture",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"users",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"bio",type:"string"},{internalType:"string",name:"profilePictureCID",type:"string"}],stateMutability:"view",type:"function"}],me=[{inputs:[{internalType:"string",name:"baseUri_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"caller",type:"address"},{indexed:!1,internalType:"uint256",name:"time",type:"uint256"}],name:"Fallback",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"NFTMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{stateMutability:"nonpayable",type:"fallback"},{inputs:[],name:"REQUIRED_FRIENDS",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"providedFriends",type:"uint256"}],name:"mint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],he=n(327),ge=n(425),ye=new he,fe=n(758);let be=new fe.providers.JsonRpcProvider("https://polygon-mumbai.g.alchemy.com/v2/wusrTgSFSsScFKTK6Nqa5rFoisfYXjPW");var ve=(0,w.y$)({state:{address:"",chainId:"",chain:"",deployHash:"",contractAddress:"0x99E1De5314d700b79e339062B6c66c87015Eb52F",isConnected:!1,username:"",userBio:"",userProfilePicture:"",contest:{},ipfsHash:"",pinataImageUrl:""},getters:{},mutations:{},actions:{async connectWallet({state:e}){"undefined"!==typeof window.ethereum?(console.log("Ethereum client installed!"),!0===ethereum.isMetaMask?(console.log("Metamask installed!"),!0!==ethereum.isConnected()&&(console.log("Metamask is not connected!"),await ethereum.enable(),e.isConnected=!0,e.buttonText="Connected"),console.log("Metamask connected!"),e.isConnected=!0,e.buttonText="Connected"):alert("Metamask is not installed!")):alert("Ethereum client is not installed!"),ethereum.on("disconnect",(()=>{e.isConnected=!1,e.buttonText="Connect MetaMask"})),be=new fe.providers.Web3Provider(ethereum),await ethereum.request({method:"eth_requestAccounts"}).then((t=>{e.address=fe.utils.getAddress(t[0]),e.signer=be.getSigner(),console.log(`Account ${e.address} connected`),alert("Connected!")})),e.chainId=await window.ethereum.request({method:"eth_chainId"}),console.log("chainId: ",e.chainId),"0x1"==e.chainId?e.chain="mainnet":"0x5"==e.chainId?(e.chain="goerli",be=new fe.providers.JsonRpcProvider("https://eth-goerli.g.alchemy.com/v2/TS8hjejOOd_2UNj46exSTVtqS7-JxYrT"),e.contest=new fe.Contract(e.contractAddress,pe,be)):"0x539"==e.chainId?(e.chain="ganache",be=new fe.providers.JsonRpcProvider("HTTP://127.0.0.1:7545"),e.contest=new fe.Contract(e.contractAddress,pe,be)):"0x13881"==e.chainId?(e.chain="mumbai",be=new fe.providers.JsonRpcProvider("https://polygon-mumbai.g.alchemy.com/v2/wusrTgSFSsScFKTK6Nqa5rFoisfYXjPW"),e.contest=new fe.Contract(e.contractAddress,pe,be)):"0xaa36a7"==e.chainId&&(e.chain="sepolia",be=new fe.providers.JsonRpcProvider("https://eth-sepolia.g.alchemy.com/v2/UqJsOz1IQnRrGqV9bh7Q7ziNR2rN7Pi7"),e.contest=new fe.Contract(e.contractAddress,pe,be)),ethereum.on("accountsChanged",(t=>{e.address=fe.utils.getAddress(t[0]),e.signer=be.getSigner(),console.log(`accounts changed to ${e.address}`)})),ethereum.on("chainChanged",(async t=>{be=new fe.providers.Web3Provider(ethereum),e.chainId=await window.ethereum.request({method:"eth_chainId"}),console.log(`chainId changed to ${e.chainId}`),"0x1"==e.chainId?(e.chain="mainnet",alert(`chain changed to ${e.chain}`)):"0x5"==e.chainId?(e.chain="goerli",be=new fe.providers.JsonRpcProvider("https://eth-goerli.g.alchemy.com/v2/TS8hjejOOd_2UNj46exSTVtqS7-JxYrT"),alert(`chain changed to ${e.chain}`)):"0x539"==e.chainId?(e.chain="ganache",be=new fe.providers.JsonRpcProvider("HTTP://127.0.0.1:7545"),alert(`chain changed to ${e.chain}`)):"0x13881"==e.chainId?(e.chain="mumbai",be=new fe.providers.JsonRpcProvider("https://polygon-mumbai.g.alchemy.com/v2/wusrTgSFSsScFKTK6Nqa5rFoisfYXjPW"),alert(`chain changed to ${e.chain}`)):"0xaa36a7"==e.chainId&&(e.chain="sepolia",be=new fe.providers.JsonRpcProvider("https://eth-sepolia.g.alchemy.com/v2/UqJsOz1IQnRrGqV9bh7Q7ziNR2rN7Pi7"),alert(`chain changed to ${e.chain}`))}))},async uploadFileToPinata({state:e},t){try{const[n]=t;console.log(n),ye.append("file",n),console.log(ye);const s={name:"File name"};ye.append("pinataMetadata",JSON.stringify(s)),console.log(ye);const a={cidVersion:1};ye.append("pinataOptions",JSON.stringify(a)),console.log(ye);const i=await ge.post("https://api.pinata.cloud/pinning/pinFileToIPFS",ye,{headers:{"Content-Type":"multipart/form-data",pinata_api_key:"9f9dddac700bdd120e3a",pinata_secret_api_key:"17c862b69b21e1aaf67acc71415c7838aaeb9be84209b09044f6d0254ef700e8"}});return console.log(i),e.ipfsHash=i.data.IpfsHash,i.data.IpfsHash}catch(n){throw console.error("Error uploading file to Pinata:",n),n}},async getImageFromPinata({state:e},t){try{const e=`https://rose-decisive-louse-962.mypinata.cloud/ipfs/${t}`;return e}catch(n){console.error("Error fetching image from Pinata:",n)}},async registerProfile({state:e},t){const[n]=t,s=new fe.utils.Interface(pe),a=s.encodeFunctionData("registerProfile",[n]),i=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:e.address,to:e.contractAddress,data:a}]});console.log(`Tx hash: ${i}`),console.log("Registered succesfully!")},async updateProfileName({state:e},t){const[n]=t,s=new fe.utils.Interface(pe),a=s.encodeFunctionData("updateProfileName",[n]),i=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:e.address,to:e.contractAddress,data:a}]});console.log(`Tx hash: ${i}`),console.log("Name changed succesfully!")},async updateProfileBio({state:e},t){const[n]=t,s=new fe.utils.Interface(pe),a=s.encodeFunctionData("updateProfileBio",[n]),i=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:e.address,to:e.contractAddress,data:a}]});console.log(`Tx hash: ${i}`),console.log("BIO changed succesfully!")},async updateProfilePicture({dispatch:e,state:t},n){const[s]=n;try{const e=new fe.utils.Interface(pe),n=e.encodeFunctionData("updateProfilePicture",[s]),a=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:t.address,to:t.contractAddress,data:n}]});console.log(`Tx hash: ${a}`),console.log("Picture changed successfully!")}catch(a){console.error("Error updating profile picture:",a)}},async getUserProfile({state:e,dispatch:t},n){console.log(n),console.log("Store");const[s,a,i,r]=await e.contest.getUserProfile(n[0]);console.log(i);let o=await t("getImageFromPinata",i);o="https://rose-decisive-louse-962.mypinata.cloud/ipfs/"===o?"'https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Default_pfp.svg/1200px-Default_pfp.svg.png'":await t("getImageFromPinata",i);const d={address:n[0],name:s,bio:a,image:o,friends:r};return d},async sendFriendRequest({state:e,dispatch:t},n){const s=new fe.utils.Interface(pe),a=s.encodeFunctionData("sendFriendRequest",[n]),i=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:e.address,to:e.contractAddress,data:a}]});console.log(`Tx hash: ${i}`),console.log("Friend request sent succesfully!")},async getFriendRequests({state:e},t){let n=[];return n=await e.contest.getFriendRequests(t[0]),console.log(n),n},async getincomingFriendRequests({state:e},t){console.log(t);let n=[];return n=await e.contest.getincomingFriendRequests(t[0]),console.log(n),n},async acceptFriendRequest({state:e,dispatch:t},n){const s=new fe.utils.Interface(pe),a=s.encodeFunctionData("acceptFriendRequest",[n[0]]),i=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:e.address,to:e.contractAddress,data:a}]});console.log(`Tx hash: ${i}`),console.log("Friend accepted succesfully!")},async declineFriendRequest({state:e,dispatch:t},n){const s=new fe.utils.Interface(pe),a=s.encodeFunctionData("declineFriendRequest",[n[0]]),i=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:e.address,to:e.contractAddress,data:a}]});console.log(`Tx hash: ${i}`),console.log("Friend declined succesfully!")},async removeFriend({state:e,dispatch:t},n){const s=new fe.utils.Interface(pe),a=s.encodeFunctionData("removeFriend",[n[0]]),i=await window.ethereum.request({method:"eth_sendTransaction",params:[{from:e.address,to:e.contractAddress,data:a}]});console.log(`Tx hash: ${i}`),console.log("Friend removed succesfully!")},async getTOPWEB3({state:e},t){const[n,s]=t,a="fd487565fd2e65acc3467ae53c1aa6920763a602f3b44fb944b95f7286f57cd2",i=new fe.Wallet(a,be),r=new fe.Contract("0xDbB0e637bcEaE22EC53890BBAF213a3a46Cb8c80",me,i),o=r.interface.encodeFunctionData("mint",[n,s]),d=await i.sendTransaction({to:"0xDbB0e637bcEaE22EC53890BBAF213a3a46Cb8c80",data:o}),c=await d.wait();console.log("Transaction mined:",c.transactionHash),console.log("NFT Minted succesfully!")},async getBalanceNFT({state:e},t){console.log(t);const n=new fe.Contract("0xDbB0e637bcEaE22EC53890BBAF213a3a46Cb8c80",me,be);console.log(n);const s=await n.balanceOf(t[0]);return console.log(s),0!=s}},modules:{}});const Fe={class:"user-container"},we={class:"user-details"},ke={class:"user-image"},Te=["src"],Ae={class:"user-actions"},Pe={key:0},Ce=["disabled"],qe={key:1},Ie=(0,a.Lk)("h1",null,"Already friends",-1),Le=[Ie];function Ee(e,t,n,s,i,r){return(0,a.uX)(),(0,a.CE)("div",Fe,[(0,a.Lk)("div",we,[(0,a.Lk)("h1",null,"User Address: "+(0,l.v_)(this.user.address),1),(0,a.Lk)("h1",null,"Username: "+(0,l.v_)(this.user.name),1),(0,a.Lk)("h1",null,"User BIO: "+(0,l.v_)(this.user.bio||"No BIO yet"),1)]),(0,a.Lk)("div",ke,[(0,a.Lk)("img",{src:this.user.image,alt:"Pinata Image"},null,8,Te)]),(0,a.Lk)("div",Ae,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.getUser&&r.getUser(...e)),class:"btn"},"Refresh"),i.isFriend?((0,a.uX)(),(0,a.CE)("div",Pe,[(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.sendRequest&&r.sendRequest(...e)),disabled:i.buttonDisabled,class:"btn"},(0,l.v_)(i.buttonText),9,Ce)])):((0,a.uX)(),(0,a.CE)("div",qe,Le))])])}var Re={name:"user-item",data(){return{user:{},hasWatched:!1,buttonText:"Send Friend Request",isFriend:!1,buttonDisabled:!1}},props:{userAddress:{type:String,require:!0}},methods:{...(0,w.i0)({getUserProfile:"getUserProfile",connectWallet:"connectWallet",sendFriendRequest:"sendFriendRequest"}),async getUser(){console.log(this.userAddress),this.user=await this.getUserProfile([this.userAddress]),console.log(this.user.friends.includes(this.$store.state.address)),this.user.friends.includes(this.$store.state.address)?this.isFriend=!1:this.isFriend=!0,console.log(this.user)},async sendRequest(){await this.sendFriendRequest(this.userAddress),this.buttonText="Sent request",this.buttonDisabled=!0}},watch:{"$route.params.searchAddress":"getUser"},async mounted(){this.getUser()}};const xe=(0,o.A)(Re,[["render",Ee]]);var Be=xe;const Ue={class:"navbar"},Ne={class:"search-container"},Se={class:"nav-buttons"};function We(e,t,n,i,r,o){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("nav",Ue,[(0,a.Lk)("div",Ne,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.searchAddress=e),type:"text",placeholder:"Search Address",name:"searchAddress",class:"address-input"},null,512),[[s.Jo,r.searchAddress]]),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>o.searchUser&&o.searchUser(...e)),class:"btn"},"Search")]),(0,a.Lk)("div",Se,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...t)=>e.connectWallet&&e.connectWallet(...t)),class:"btn"},"Connect Metamask"),(0,a.Lk)("button",{onClick:t[3]||(t[3]=t=>e.$router.push("/")),class:"btn"},"Мой профиль"),(0,a.Lk)("button",{onClick:t[4]||(t[4]=t=>e.$router.push("/requests")),class:"btn"},"Входящие запросы")])])])}var Oe={name:"navbar",data(){return{name:"",bio:"",selectedFile:null,searchAddress:"",user:{}}},methods:{...(0,w.i0)({connectWallet:"connectWallet",getUserProfile:"getUserProfile"}),handleFileChange(e){this.selectedFile=e.target.files[0]},async getUser(){console.log(this.$store.state.address),this.user=await this.getUserProfile([this.$store.state.address])},async searchUser(){this.$router.push(`/user/${this.searchAddress}`),this.searchAddress=""}}};const Ve=(0,o.A)(Oe,[["render",We],["__scopeId","data-v-1ac9f530"]]);var Me=Ve;const Ye={class:"request-item-container"},je={class:"profile-picture"},_e=["src"],De={key:1},Xe=(0,a.Lk)("p",null,"No profile picture yet",-1),Je=[Xe],Qe={class:"user-details"},Ge={class:"buttons-container"};function $e(e,t,n,s,i,r){return(0,a.uX)(),(0,a.CE)("div",Ye,[(0,a.Lk)("div",je,[this.user.image?((0,a.uX)(),(0,a.CE)("img",{key:0,src:this.user.image,alt:"Pinata Image"},null,8,_e)):((0,a.uX)(),(0,a.CE)("div",De,Je))]),(0,a.Lk)("div",Qe,[(0,a.Lk)("h1",null,"Address: "+(0,l.v_)(this.userAddress),1),(0,a.Lk)("h1",null,"Username: "+(0,l.v_)(this.user.name),1),(0,a.Lk)("div",Ge,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.accept&&r.accept(...e)),class:"btn accept-btn"},"Accept Request"),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.decline&&r.decline(...e)),class:"btn decline-btn"},"Decline Request")])])])}var He={name:"request-item",data(){return{user:{}}},props:{userAddress:{type:String,required:!0}},methods:{...(0,w.i0)({getUserProfile:"getUserProfile",acceptFriendRequest:"acceptFriendRequest",declineFriendRequest:"declineFriendRequest"}),async getUser(){console.log(this.userAddress),this.user=await this.getUserProfile([this.userAddress]),console.log(this.user)},async accept(){await this.acceptFriendRequest([this.userAddress])},async decline(){await this.declineFriendRequest([this.userAddress])}},async mounted(){this.getUser()},watch:{"this.userAddress":"getUser"}};const Ke=(0,o.A)(He,[["render",$e]]);var Ze=Ke;const ze={class:"friend-card"},et=["src"];function tt(e,t,n,s,i,r){return(0,a.uX)(),(0,a.CE)("div",ze,[(0,a.Lk)("img",{onClick:t[0]||(t[0]=(...e)=>r.searchUser&&r.searchUser(...e)),src:this.user.image,alt:"No Image",class:"rounded-circle",width:"100"},null,8,et),(0,a.Lk)("div",{onClick:t[1]||(t[1]=(...e)=>r.searchUser&&r.searchUser(...e)),class:"friend-details"},[(0,a.Lk)("h3",null,"Username: "+(0,l.v_)(this.user.name),1)]),(0,a.Lk)("button",{class:"btn",onClick:t[2]||(t[2]=(...e)=>r.remove&&r.remove(...e))},"Delete from friends")])}var nt={name:"friend-item",data(){return{user:{}}},props:{userAddress:{type:String,required:!0}},methods:{...(0,w.i0)({getUserProfile:"getUserProfile",acceptFriendRequest:"acceptFriendRequest",declineFriendRequest:"declineFriendRequest",removeFriend:"removeFriend"}),async getUser(){console.log(this.userAddress),this.user=await this.getUserProfile([this.userAddress]),console.log(this.user)},async searchUser(){this.$router.push(`/user/${this.userAddress}`),this.searchAddress=""},async remove(){await this.removeFriend([this.userAddress])}},async mounted(){this.getUser()},watch:{"this.userAddress":"getUser"}};const st=(0,o.A)(nt,[["render",tt]]);var at=st,it=[Be,Me,Ze,at],rt={name:"focus",mounted(e,t){console.log(e,t),e.focus()}},ot=[rt];const dt=(0,s.Ef)(c);it.forEach((e=>{dt.component(e.name,e)})),ot.forEach((e=>{dt.directive(e.name,e)})),dt.use(le).use(ve).mount("#app")},790:function(){}},t={};function n(s){var a=t[s];if(void 0!==a)return a.exports;var i=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,function(){n.amdO={}}(),function(){var e=[];n.O=function(t,s,a,i){if(!s){var r=1/0;for(u=0;u<e.length;u++){s=e[u][0],a=e[u][1],i=e[u][2];for(var o=!0,d=0;d<s.length;d++)(!1&i||r>=i)&&Object.keys(n.O).every((function(e){return n.O[e](s[d])}))?s.splice(d--,1):(o=!1,i<r&&(r=i));if(o){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[s,a,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,i,r=s[0],o=s[1],d=s[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(d)var u=d(n)}for(t&&t(s);c<r.length;c++)i=r[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},s=self["webpackChunklinkedin"]=self["webpackChunklinkedin"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[504],(function(){return n(339)}));s=n.O(s)})();
//# sourceMappingURL=app.5bd993c7.js.map